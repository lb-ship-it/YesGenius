<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>YES Genius | Digital Diplomat</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700;900&display=swap" rel="stylesheet">
    
    <style>
        /* --- CSS: YES GENIUS v3.1 ($22 SALES EDITION) --- */
        :root {
            --bg-black: #000000;
            --card-bg: rgba(18, 18, 18, 0.95);
            --gold: #d4af37;
            --gold-light: #f3e5ab;
            --gold-dim: #aa8a2e;
            --text-white: #ffffff;
            --text-gray: #a0a0a0;
            --glass-border: rgba(212, 175, 55, 0.35); 
            --radius: 16px;
        }

        * { box-sizing: border-box; }

        body {
            margin: 0; padding: 0; font-family: 'Outfit', sans-serif;
            background-color: var(--bg-black);
            background-image: radial-gradient(circle at 50% 0%, #1a1a1a 0%, #000000 85%);
            color: var(--text-white); display: flex; justify-content: center;
            min-height: 100vh; padding-bottom: 20px;
        }

        .app-container { width: 100%; max-width: 500px; padding: 20px; display: flex; flex-direction: column; gap: 15px; position: relative; }

        /* HEADER */
        header { display: flex; align-items: flex-start; justify-content: space-between; padding: 15px 0 25px 0; width: 100%; gap: 15px; position: relative; z-index: 20; }
        .logo-wrapper { flex: 0 0 25%; max-width: 25%; padding-top: 0; }
        .logo-img { width: 100%; aspect-ratio: 1/1; border-radius: 14px; border: 1px solid var(--glass-border); object-fit: cover; background: #000; box-shadow: 0 4px 15px rgba(0,0,0,0.6); display: block; }
        .title-wrapper { flex: 1; display: flex; flex-direction: column; justify-content: center; overflow: hidden; padding-top: 2px; }
        h1 { font-size: 1.9rem; font-weight: 900; margin: 0; line-height: 0.95; letter-spacing: -0.5px; background: linear-gradient(to right, #fff 20%, var(--gold) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; white-space: nowrap; }
        .subtitle { color: var(--gold); font-size: 0.75rem; margin-top: 5px; font-weight: 800; letter-spacing: 1.5px; text-transform: uppercase; white-space: nowrap; }
        .tagline-text { font-size: 0.75rem; color: #ccc; margin-top: 6px; line-height: 1.3; font-weight: 400; }
        
        .lang-wrapper { flex: 0 0 auto; display: flex; justify-content: flex-end; padding-top: 0; }
        .lang-select { background: #050505; color: var(--gold); border: 1px solid var(--glass-border); padding: 10px 8px; border-radius: 10px; font-size: 0.85rem; outline: none; cursor: pointer; font-weight: 600; text-align: right; width: auto; min-width: 130px; appearance: none; -webkit-appearance: none; background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23d4af37%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E"); background-repeat: no-repeat; background-position: right 8px top 50%; background-size: 10px auto; padding-right: 25px; transition: border-color 0.3s, box-shadow 0.3s; }
        .lang-select:focus { border-color: var(--gold); box-shadow: 0 0 12px rgba(212, 175, 55, 0.4); }
        @media (max-width: 480px) { h1 { font-size: 1.5rem; } .subtitle { font-size: 0.65rem; } .tagline-text { font-size: 0.65rem; line-height: 1.2; } .lang-select { min-width: 0; width: 32px; height: 32px; padding: 0; font-size: 1.0rem; text-align: center; background-image: none; overflow: hidden; white-space: nowrap; text-indent: 0; display: flex; align-items: center; justify-content: center; } }

        /* MAIN CARD */
        .glass-card { background: var(--card-bg); border: 1px solid var(--glass-border); border-radius: var(--radius); padding: 20px 25px; box-shadow: 0 20px 60px rgba(0,0,0,0.8); backdrop-filter: blur(12px); margin-top: 5px; position: relative; z-index: 50; }
        .input-group { margin-bottom: 20px; position: relative; }
        label { display: block; font-size: 0.7rem; text-transform: uppercase; letter-spacing: 1.5px; color: var(--text-gray); margin-bottom: 8px; font-weight: 600; }
        .smart-input-wrapper { position: relative; display: flex; align-items: center; width: 100%; }
        input, select { width: 100%; padding: 16px; padding-right: 45px; background: #050505; border: 1px solid var(--glass-border); border-radius: 12px; color: white; font-size: 1rem; font-family: inherit; outline: none; transition: 0.3s; appearance: none; -webkit-appearance: none; }
        input:focus, select:focus { border-color: var(--gold); box-shadow: 0 0 12px rgba(212, 175, 55, 0.4); }

        /* CUSTOM DROPDOWNS */
        .custom-dropdown-list { position: absolute; top: 100%; left: 0; width: 100%; max-height: 250px; overflow-y: auto; background: #050505; border: 1px solid var(--gold); border-top: none; border-radius: 0 0 12px 12px; z-index: 1000; display: none; box-shadow: 0 15px 40px rgba(0,0,0,1); }
        .dropdown-item { padding: 14px 16px; cursor: pointer; color: #ccc; font-size: 0.95rem; transition: all 0.2s; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .dropdown-item:last-child { border-bottom: none; }
        .dropdown-item:hover { background: linear-gradient(90deg, #1a1a1a, #2a2a2a); color: var(--gold); padding-left: 20px; border-left: 3px solid var(--gold); }
        .input-open { border-bottom-left-radius: 0 !important; border-bottom-right-radius: 0 !important; border-color: var(--gold) !important; }
        .dropdown-arrow { position: absolute; right: 15px; color: var(--gold); font-size: 0.8rem; pointer-events: none; opacity: 0.7; cursor: pointer; }
        #format { background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23d4af37%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E"); background-repeat: no-repeat; background-position: right 15px top 50%; background-size: 12px auto; }
        .reset-btn { position: absolute; right: 10px; background: #050505; border: none; color: #666; font-size: 1.1rem; cursor: pointer; padding: 5px 8px; display: none; border-radius: 4px; z-index: 10; }
        .reset-btn:hover { color: var(--gold); }

        /* BUTTONS & MODALS */
        .btn-main { width: 100%; padding: 20px; margin-top: 10px; background: linear-gradient(135deg, var(--gold) 0%, var(--gold-dim) 100%); border: none; border-radius: 12px; color: #000; font-weight: 900; font-size: 1.3rem; text-transform: uppercase; cursor: pointer; box-shadow: 0 5px 20px rgba(212, 175, 55, 0.2); transition: transform 0.2s; display: flex; justify-content: center; align-items: center; gap: 10px; }
        .btn-main:active { transform: scale(0.98); }
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); backdrop-filter: blur(8px); z-index: 9999; display: none; justify-content: center; align-items: center; padding: 20px; }
        .modal-card { background: #0a0a0a; border: 2px solid var(--gold); border-radius: 24px; padding: 30px; text-align: center; max-width: 400px; width: 100%; box-shadow: 0 0 60px rgba(212, 175, 55, 0.4); animation: slideIn 0.4s ease; position: relative; }
        .modal-title { font-size: 1.6rem; font-weight: 900; color: var(--gold); margin-bottom: 15px; text-transform: uppercase; letter-spacing: 1px; }
        .modal-text { color: #ddd; margin-bottom: 25px; line-height: 1.6; font-size: 1rem; }
        .close-modal { position: absolute; top: 15px; right: 20px; color: #666; font-size: 1.5rem; cursor: pointer; }
        .key-input { width: 100%; padding: 15px; margin-bottom: 15px; background: #111; border: 1px solid #444; border-radius: 10px; color: var(--gold); font-family: monospace; font-size: 1.1rem; text-align: center; letter-spacing: 2px; }
        .vip-footer { margin-top: 30px; padding: 30px 20px; background: linear-gradient(180deg, rgba(20,20,20,0.95) 0%, rgba(5,5,5,1) 100%); border: 1px solid var(--glass-border); border-radius: 24px; text-align: center; box-shadow: 0 0 40px rgba(0,0,0,0.5); position: relative; overflow: hidden; z-index: 10; }
        .vip-title { color: var(--gold); font-size: 0.85rem; font-weight: 800; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 15px; }
        .benefits-list { display: flex; flex-wrap: wrap; justify-content: center; gap: 12px; margin-bottom: 25px; font-size: 0.75rem; color: #ccc; line-height: 1.6; }
        .benefit-item { white-space: nowrap; } .bullet { color: var(--gold); margin-right: 4px; }
        .btn-vip-large { width: 100%; padding: 18px; background: linear-gradient(135deg, var(--gold) 0%, #d6ae36 40%, #aa8a2e 100%); border: none; border-radius: 50px; color: #000; cursor: pointer; position: relative; z-index: 2; box-shadow: 0 0 25px rgba(212, 175, 55, 0.3); transition: transform 0.2s; display: flex; flex-direction: column; align-items: center; }
        .btn-vip-large:hover { transform: scale(1.02); box-shadow: 0 0 40px rgba(212, 175, 55, 0.5); }
        .vip-btn-main-text { font-size: 1.1rem; font-weight: 900; text-transform: uppercase; letter-spacing: 0.5px; }
        .vip-btn-sub-text { font-size: 0.75rem; font-weight: 600; opacity: 0.85; margin-top: 2px; }
        .privacy-note { margin-top: 20px; font-size: 0.65rem; color: #444; text-transform: uppercase; letter-spacing: 1px; }
        
        #vysledek { display: none; margin-top: 20px; animation: fadeIn 0.6s ease; }
        .result-card { background: rgba(255,255,255,0.03); border-left: 3px solid var(--gold); padding: 20px; margin-bottom: 15px; border-radius: 10px; }
        .result-text { font-size: 1.05rem; line-height: 1.5; margin-bottom: 15px; color: #f0f0f0; }
        .action-row { display: flex; gap: 10px; }
        .btn-action { flex: 1; padding: 12px; background: rgba(255,255,255,0.08); border: none; border-radius: 8px; color: var(--gold); font-weight: 700; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; font-size: 0.9rem; }
        #loader { display: none; text-align: center; margin-top: 15px; color: var(--gold); font-weight: 600; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideIn { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    </style>
</head>
<body>

<div class="app-container">
    <header>
        <div class="logo-wrapper"><img src="logo.png" alt="YES Genius Logo" class="logo-img"></div>
        <div class="title-wrapper">
            <h1>YES Genius</h1>
            <div id="subtitle" class="subtitle">DIGITAL DIPLOMAT</div>
            <div id="tagline" class="tagline-text"></div>
        </div>
        <div class="lang-wrapper">
            <select id="lang-select" class="lang-select" onchange="changeLanguage()">
                <option value="en-US" selected>üá∫üá∏ English (US)</option>
                <option value="en-GB">üá¨üáß English (UK)</option>
                <option value="cs">üá®üáø ƒåe≈°tina</option>
                <option value="de">üá©üá™ Deutsch</option>
                <option value="uk">üá∫üá¶ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</option>
                <option value="es">üá™üá∏ Espa√±ol</option>
                <option value="fr">üá´üá∑ Fran√ßais</option>
                <option value="it">üáÆüáπ Italiano</option>
                <option value="pt">üáµüáπ Portugu√™s</option>
                <option value="pl">üáµüá± Polski</option>
                <option value="nl">üá≥üá± Nederlands</option>
                <option value="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</option>
                <option value="tr">üáπüá∑ T√ºrk√ße</option>
                <option value="ar">üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
                <option value="zh">üá®üá≥ ‰∏≠Êñá</option>
                <option value="ja">üáØüáµ Êó•Êú¨Ë™û</option>
                <option value="ko">üá∞üá∑ ÌïúÍµ≠Ïñ¥</option>
                <option value="hi">üáÆüá≥ ‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
                <option value="sv">üá∏üá™ Svenska</option>
                <option value="no">üá≥üá¥ Norsk</option>
                <option value="da">üá©üá∞ Dansk</option>
                <option value="fi">üá´üáÆ Suomi</option>
                <option value="el">üá¨üá∑ ŒïŒªŒªŒ∑ŒΩŒπŒ∫Œ¨</option>
                <option value="ro">üá∑üá¥ Rom√¢nƒÉ</option>
            </select>
        </div>
    </header>

    <main class="glass-card">
        <div class="input-group">
            <label id="lbl-format">Format</label>
            <div class="smart-input-wrapper">
                <select id="format"><option value="SMS" id="opt-sms">SMS / WhatsApp</option><option value="Email">Email</option><option value="Call">Phone Call Script</option><option value="Slack">Slack / Teams</option></select>
            </div>
        </div>
        <div class="input-group">
            <label id="lbl-target">Recipient</label>
            <div class="smart-input-wrapper">
                <input type="text" id="adresat" class="smart-input" placeholder="Select or type..." autocomplete="off" oninput="filterDropdown('adresat', 'list-recipient')" onfocus="showDropdown('adresat', 'list-recipient')">
                <div class="dropdown-arrow" onclick="toggleDropdown('adresat', 'list-recipient')">‚ñº</div><button class="reset-btn" onclick="clearInput('adresat')">‚úï</button>
                <div id="list-recipient" class="custom-dropdown-list"></div>
            </div>
        </div>
        <div class="input-group">
            <label id="lbl-reason">Reason</label>
            <div class="smart-input-wrapper">
                <input type="text" id="kategorie" class="smart-input" placeholder="Select or type..." autocomplete="off" oninput="filterDropdown('kategorie', 'list-reason')" onfocus="showDropdown('kategorie', 'list-reason')">
                <div class="dropdown-arrow" onclick="toggleDropdown('kategorie', 'list-reason')">‚ñº</div><button class="reset-btn" onclick="clearInput('kategorie')">‚úï</button>
                <div id="list-reason" class="custom-dropdown-list"></div>
            </div>
        </div>
        <div class="input-group">
            <label id="lbl-style">Style</label>
            <div class="smart-input-wrapper">
                <input type="text" id="styl" class="smart-input" placeholder="Select or type..." autocomplete="off" oninput="filterDropdown('styl', 'list-style')" onfocus="showDropdown('styl', 'list-style')">
                <div class="dropdown-arrow" onclick="toggleDropdown('styl', 'list-style')">‚ñº</div><button class="reset-btn" onclick="clearInput('styl')">‚úï</button>
                <div id="list-style" class="custom-dropdown-list"></div>
            </div>
        </div>

        <button id="btn-generate" class="btn-main" onclick="handleGenerateClick()">
            YES <span id="btn-verb">GENERATE!</span>
        </button>
        <div id="loader">‚ú® AI is negotiating...</div>
    </main>

    <section id="vysledek">
        <label id="lbl-results" style="margin-bottom: 10px;">Your Drafts:</label>
        <div id="variants-container"></div>
    </section>

    <div id="paywall-modal" class="modal-overlay">
        <div class="modal-card">
            <span class="close-modal" onclick="closeModal('paywall-modal')">√ó</span>
            <div class="modal-title">üîí UNLOCK FULL ACCESS</div>
            <div class="modal-text">To use YES Genius, you need a Lifetime License. One-time payment of $22. No monthly fees.</div>
            <button class="btn-vip-large" onclick="koupit()">GET LICENSE ($22)</button>
            <div style="margin-top: 20px; font-size: 0.8rem; color: #666; cursor: pointer; text-decoration: underline;" onclick="showKeyInput()">I already have a key</div>
        </div>
    </div>

    <div id="key-modal" class="modal-overlay">
        <div class="modal-card">
            <span class="close-modal" onclick="closeModal('key-modal')">√ó</span>
            <div class="modal-title">üîë ENTER YOUR KEY</div>
            <div class="modal-text">Paste the license key or email you used for purchase.</div>
            <input type="text" id="license-input" class="key-input" placeholder="YG-XXXXXXXX">
            <button class="btn-vip-large" onclick="saveLicenseKey()">ACTIVATE</button>
        </div>
    </div>

    <div id="success-modal" class="modal-overlay">
        <div class="modal-card">
            <div class="modal-title">üéâ ACCESS GRANTED</div>
            <div class="modal-text">Welcome to the club! Your license is active.</div>
            <button class="btn-vip-large" onclick="closeModal('success-modal')">START GENERATING</button>
        </div>
    </div>

    <footer class="vip-footer">
        <div class="vip-title" id="vip-title">üëë UNLOCK FULL POTENTIAL</div>
        <div class="benefits-list">
            <span class="benefit-item"><span class="bullet">‚Ä¢</span><span id="b1">No Fees</span></span>
            <span class="benefit-item"><span class="bullet">‚Ä¢</span><span id="b2">Lifetime Access</span></span>
            <span class="benefit-item"><span class="bullet">‚Ä¢</span><span id="b3">Free Updates</span></span>
            <span class="benefit-item"><span class="bullet">‚Ä¢</span><span id="b4">Secure Payment</span></span>
        </div>
        <button class="btn-vip-large" onclick="koupit()">
            <span class="vip-btn-main-text" id="vip-btn-main">GET LIFETIME ACCESS</span>
            <span class="vip-btn-sub-text" id="vip-btn-sub">One-time payment $22</span>
        </button>
        <div class="privacy-note" id="privacy-note">We do not collect any personal data.</div>
    </footer>
</div>

<script>
    /* --- YES GENIUS v3.1 (Business Edition - Updated Link) --- */

    // TV≈ÆJ NOV√ù STIPE ODKAZ
    const PAYMENT_LINK = "https://buy.stripe.com/28EbJ2etD0Gw29g5DAa7C04"; 

    // LICENSE LOGIC
    let userLicense = localStorage.getItem('yes_genius_license_v1');

    function handleGenerateClick() {
        if (userLicense) {
            generovat();
        } else {
            document.getElementById('paywall-modal').style.display = 'flex';
        }
    }

    function showKeyInput() {
        closeModal('paywall-modal');
        document.getElementById('key-modal').style.display = 'flex';
    }

    function saveLicenseKey() {
        // Jednoduch√° validace - v re√°lu by se ovƒõ≈ôovala proti DB, pro MVP staƒç√≠, ≈æe nƒõco zadal
        const key = document.getElementById('license-input').value.trim();
        if (key.length > 3) {
            localStorage.setItem('yes_genius_license_v1', key);
            userLicense = key;
            closeModal('key-modal');
            document.getElementById('success-modal').style.display = 'flex';
        } else {
            alert("Invalid Key");
        }
    }

    function closeModal(id) { document.getElementById(id).style.display = 'none'; }

    // MAPOV√ÅN√ç JAZYK≈Æ
    const langNames = {
        'en-US': 'American English', 'en-GB': 'British English', 'cs': 'Czech',
        'de': 'German', 'uk': 'Ukrainian', 'es': 'Spanish', 'fr': 'French',
        'it': 'Italian', 'pt': 'Portuguese', 'pl': 'Polish', 'nl': 'Dutch',
        'ru': 'Russian', 'tr': 'Turkish', 'ar': 'Arabic', 'zh': 'Chinese',
        'ja': 'Japanese', 'ko': 'Korean', 'hi': 'Hindi', 'sv': 'Swedish',
        'no': 'Norwegian', 'da': 'Danish', 'fi': 'Finnish', 'el': 'Greek', 'ro': 'Romanian'
    };

    // P≈òEKLADY
    const translations = {
        'en-US': { 
            sub: "DIGITAL DIPLOMAT", tagline: "Even diplomats have bad days.<br>We make sure you don't.", 
            verb: "GENERATE!", fmt: "Format", tgt: "Recipient", rsn: "Reason", sty: "Tone & Style", 
            ph: "Select or type...", res: "Your Drafts:", copy: "Copy", share: "Share",
            vipTitle: "üëë UNLOCK FULL POTENTIAL", b1: "No Monthly Fees", b2: "Lifetime Access", b3: "Free Updates", b4: "Secure Payment", vMain: "GET LIFETIME ACCESS", vSub: "One-time payment $22", privacy: "We do not collect any personal data.",
            recList: ["Boss", "Partner", "Wife", "Husband", "Mother-in-law", "Father-in-law", "Client", "Colleague", "Mom", "Dad", "Teacher"],
            rsnList: ["Running Late", "Feeling Sick", "Missed Deadline", "Canceling Plans", "Family Emergency", "Car Trouble"],
            styList: ["Professional", "Creative / Funny", "Slang / Street", "Dramatic", "Strictly Formal", "Casual", "Apologetic"]
        },
        'cs': { 
            sub: "DIGIT√ÅLN√ç DIPLOMAT", tagline: "I diplomat√© maj√≠ ≈°patn√© dny.<br>My jist√≠me ty va≈°e.",
            verb: "GENERUJ!", fmt: "Form√°t", tgt: "Adres√°t", rsn: "D≈Øvod", sty: "T√≥n a Styl", 
            ph: "Vyber nebo napi≈°...", res: "Tv√© n√°vrhy:", copy: "Kop√≠rovat", share: "Sd√≠let",
            vipTitle: "üëë ODEMKNI PLN√ù POTENCI√ÅL", b1: "≈Ω√°dn√© poplatky", b2: "Do≈æivotn√≠ p≈ô√≠stup", b3: "Aktualizace zdarma", b4: "Bezpeƒçn√° platba", vMain: "Z√çSKAT DO≈ΩIVOTN√ç P≈ò√çSTUP", vSub: "Jednor√°zov√° platba $22", privacy: "Nesb√≠r√°me ≈æ√°dn√© osobn√≠ √∫daje.",
            recList: ["≈†√©f", "Partner", "Man≈æelka", "Man≈æel", "Tchynƒõ", "Tch√°n", "Klient", "Kolega", "M√°ma", "T√°ta", "Uƒçitel"],
            rsnList: ["Jdu pozdƒõ", "Jsem nemocn√Ω/√°", "Nest√≠h√°m term√≠n", "Ru≈°√≠m pl√°ny", "Rodinn√© d≈Øvody", "Porucha auta"],
            styList: ["Profesion√°ln√≠", "Kreativn√≠ / Vtipn√Ω", "Slang / Hovorov√Ω", "Dramatick√Ω", "Form√°ln√≠", "Neform√°ln√≠", "Omluvn√Ω"]
        },
        'default': {
            sub: "DIGITAL DIPLOMAT", tagline: "Even diplomats have bad days.<br>We make sure you don't.",
            verb: "GENERATE!", fmt: "Format", tgt: "Recipient", rsn: "Reason", sty: "Style", 
            ph: "Select...", res: "Drafts:", copy: "Copy", share: "Share",
            vipTitle: "üëë UNLOCK FULL POTENTIAL", b1: "No Fees", b2: "Lifetime Access", b3: "Free Updates", b4: "Secure Payment", vMain: "GET LIFETIME ACCESS", vSub: "One-time payment $22", privacy: "We do not collect any personal data.",
            recList: ["Boss", "Partner", "Client", "Friend", "In-laws"], rsnList: ["Late", "Sick", "Emergency"], styList: ["Professional", "Casual", "Slang"]
        }
    };

    function getTexts(lang) { return translations[lang] || translations['en-US'] || translations['default']; }

    // UI & DROPDOWN LOGIC
    function toggleReset(input) {
        const btn = input.parentElement.querySelector('.reset-btn');
        const arrow = input.parentElement.querySelector('.dropdown-arrow');
        if (input.value.length > 0) { btn.style.display = 'block'; arrow.style.display = 'none'; } else { btn.style.display = 'none'; arrow.style.display = 'block'; }
    }
    function clearInput(id) { const input = document.getElementById(id); input.value = ''; toggleReset(input); setTimeout(() => { input.focus(); }, 50); }
    function populateDatalist(listId, items) {
        const list = document.getElementById(listId); if(!list) return; list.innerHTML = '';
        items.forEach(item => { const div = document.createElement('div'); div.className = 'dropdown-item'; div.innerText = item; div.onclick = function() { const inputId = listId === 'list-recipient' ? 'adresat' : (listId === 'list-reason' ? 'kategorie' : 'styl'); selectItem(inputId, item, listId); }; list.appendChild(div); });
    }
    function selectItem(inputId, value, listId) { const input = document.getElementById(inputId); input.value = value; toggleReset(input); hideDropdown(listId, inputId); }
    function showDropdown(inputId, listId) { closeAllDropdowns(); const list = document.getElementById(listId); const input = document.getElementById(inputId); list.style.display = 'block'; input.classList.add('input-open'); const items = list.getElementsByClassName('dropdown-item'); for (let item of items) { item.style.display = 'block'; } }
    function hideDropdown(listId, inputId) { const list = document.getElementById(listId); const input = document.getElementById(inputId); setTimeout(() => { list.style.display = 'none'; input.classList.remove('input-open'); }, 150); }
    function toggleDropdown(inputId, listId) { const list = document.getElementById(listId); if (list.style.display === 'block') { hideDropdown(listId, inputId); } else { showDropdown(inputId, listId); document.getElementById(inputId).focus(); } }
    function filterDropdown(inputId, listId) { const input = document.getElementById(inputId); toggleReset(input); const filter = input.value.toLowerCase(); const list = document.getElementById(listId); const items = list.getElementsByClassName('dropdown-item'); list.style.display = 'block'; input.classList.add('input-open'); let hasVisible = false; for (let item of items) { if (item.innerText.toLowerCase().indexOf(filter) > -1) { item.style.display = "block"; hasVisible = true; } else { item.style.display = "none"; } } }
    function closeAllDropdowns() { const lists = document.querySelectorAll('.custom-dropdown-list'); const inputs = document.querySelectorAll('.smart-input'); lists.forEach(l => l.style.display = 'none'); inputs.forEach(i => i.classList.remove('input-open')); }
    document.addEventListener('click', function(e) { if (!e.target.closest('.smart-input-wrapper')) { closeAllDropdowns(); } });

    function changeLanguage() {
        const lang = document.getElementById('lang-select').value;
        localStorage.setItem('yesGeniusLang', lang);
        const t = getTexts(lang);
        document.getElementById('subtitle').innerText = t.sub;
        document.getElementById('tagline').innerHTML = t.tagline;
        document.getElementById('btn-verb').innerText = t.verb;
        document.getElementById('lbl-format').innerText = t.fmt;
        document.getElementById('lbl-target').innerText = t.tgt;
        document.getElementById('lbl-reason').innerText = t.rsn;
        document.getElementById('lbl-style').innerText = t.sty;
        document.getElementById('lbl-results').innerText = t.res;
        document.getElementById('vip-title').innerText = t.vipTitle;
        document.getElementById('b1').innerText = t.b1; document.getElementById('b2').innerText = t.b2;
        document.getElementById('b3').innerText = t.b3; document.getElementById('b4').innerText = t.b4;
        document.getElementById('vip-btn-main').innerText = t.vMain;
        document.getElementById('vip-btn-sub').innerText = t.vSub;
        document.getElementById('privacy-note').innerText = t.privacy;
        document.querySelectorAll('.smart-input').forEach(inp => inp.placeholder = t.ph);
        populateDatalist('list-recipient', t.recList); populateDatalist('list-reason', t.rsnList); populateDatalist('list-style', t.styList);
        const smsOption = document.getElementById('opt-sms');
        if (['zh'].includes(lang)) smsOption.innerText = "WeChat / SMS"; else if (['ja', 'th'].includes(lang)) smsOption.innerText = "LINE / SMS"; else if (['ko'].includes(lang)) smsOption.innerText = "KakaoTalk / SMS"; else if (['vn'].includes(lang)) smsOption.innerText = "Zalo / SMS"; else smsOption.innerText = "SMS / WhatsApp";
    }

    // SERVER CALL
    async function generovat() {
        const btn = document.getElementById('btn-generate');
        const loader = document.getElementById('loader');
        const results = document.getElementById('vysledek');
        const langCode = document.getElementById('lang-select').value;
        const requestData = {
            format: document.getElementById('format').value,
            adresat: document.getElementById('adresat').value,
            kategorie: document.getElementById('kategorie').value, 
            styl: document.getElementById('styl').value,
            jazyk: langNames[langCode] || langCode,
            licenseKey: userLicense // Pos√≠l√°me kl√≠ƒç (pokud existuje)
        };

        if(!requestData.adresat) { alert("Please specify a Recipient!"); return; }

        results.style.display = 'none'; btn.style.opacity = '0.5'; loader.style.display = 'block';

        try {
            const response = await fetch('/api/generovat', {
                method: 'POST', headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(requestData)
            });
            const data = await response.json();
            if (data.variants && Array.isArray(data.variants)) {
                zobrazitVysledky(data.variants);
            } else { throw new Error("Invalid data"); }
        } catch (error) {
            console.error(error); alert("Connection Error");
        } finally {
            loader.style.display = 'none'; btn.style.opacity = '1';
        }
    }

    function zobrazitVysledky(data) {
        const container = document.getElementById('variants-container');
        const lang = document.getElementById('lang-select').value;
        const t = getTexts(lang);
        container.innerHTML = '';
        data.forEach(text => {
            const div = document.createElement('div');
            div.className = 'result-card';
            const safeText = text.replace(/'/g, "\\'").replace(/"/g, '&quot;');
            div.innerHTML = `<div class="result-text">${text}</div><div class="action-row"><button class="btn-action" onclick="kopirovat(this, '${safeText}')">üìã ${t.copy}</button><button class="btn-action" onclick="sdilet('${safeText}')">üîó ${t.share}</button></div>`;
            container.appendChild(div);
        });
        document.getElementById('vysledek').style.display = 'block';
        document.getElementById('vysledek').scrollIntoView({ behavior: 'smooth' });
    }

    function kopirovat(btn, text) { navigator.clipboard.writeText(text).then(() => { let orig = btn.innerHTML; btn.innerHTML = "‚úÖ"; setTimeout(() => btn.innerHTML = orig, 1500); }); }
    function sdilet(text) { if (navigator.share) navigator.share({ title: 'YES Genius', text: text }); else kopirovat(this, text); }
    function koupit() { window.location.href = PAYMENT_LINK; } // P≈ò√çM√â OTEV≈òEN√ç STRIPE

    window.onload = function() {
        const savedLang = localStorage.getItem('yesGeniusLang');
        if (savedLang) document.getElementById('lang-select').value = savedLang;
        changeLanguage();
        
        // KONTROLA N√ÅVRATU ZE STRIPE
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get('status') === 'success') {
            const key = "YG-VIP-" + Math.random().toString(36).substr(2, 6).toUpperCase();
            localStorage.setItem('yes_genius_license_v1', key);
            userLicense = key;
            document.getElementById('success-modal').style.display = 'flex';
            window.history.replaceState({}, document.title, "/");
        }
    }
</script>
</body>
</html>
